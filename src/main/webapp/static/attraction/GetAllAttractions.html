<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>景點列表</title>
</head>
<body>
    <h1>景點列表</h1>
    <button onclick="location.href='http://localhost:8080/CloudSerenityHotel/static/attraction/addAttraction.html'">新增景點</button>
    <button onclick="location.href='http://localhost:8080/CloudSerenityHotel/static/attraction/findAttraction.html'">查詢單筆景點</button>
    <table border="1">
        <thead>
            <tr>
                <th>景點名稱</th>
                <th>描述</th>
                <th>位置</th>
                <th>開放時間</th>
                <th>聯絡資訊</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody id="attractionTable">
            <!-- 景點資料由JavaScript填充 -->
        </tbody>
    </table>

    <script>
        // 使用Fetch獲取所有景點並顯示
        fetch('http://localhost:8080/CloudSerenityHotel/api/attractions/')
            .then(response => response.json())
            .then(data => {
                const tableBody = document.getElementById('attractionTable');
                data.forEach(attraction => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${attraction.name}</td>
                        <td>${attraction.description}</td>
                        <td>${attraction.location}</td>
                        <td>${attraction.openingHours}</td>
                        <td>${attraction.contactInfo}</td>
                        <td>
                            <button onclick="deleteAttraction(${attraction.attractionId})">刪除</button>
                            <button onclick="editAttraction(${attraction.attractionId})">修改</button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
            });

        // 刪除景點
        function deleteAttraction(id) {
            fetch(`http://localhost:8080/CloudSerenityHotel/api/attractions/${id}`, { method: 'DELETE' })
                .then(() => location.reload());
        }

        // 修改景點
        function editAttraction(id) {
            location.href = `http://localhost:8080/CloudSerenityHotel/static/attraction/editAttraction.html?id=${id}`;
        }
    </script>
</body>
</html>
